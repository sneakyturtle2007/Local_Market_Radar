<!--Webpage for logging into preexisting accounts, Nora Reese, Luis Blake, Last Updated March 22, 2024-->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="Login.css">
        <title>Local Market Radar</title>
    </head>
    <body>
        <header>
             <h1>Local Market Radar</h1>
            <hr>
        </header>
        <main>
            <div class="container">
                <div class="login">
                    <input type="text" id="Username">Username</input>
                    <input type="password" id="Password">Password</input>
                   
                    <button id = "loginButton">Log in</button>
                </div>    
            </div>
            
        </main>
        
        <footer style="position: fixed; bottom: 0; width: 100%; text-align: center; color: white; font-family: sans-serif;">
            <p>Created by: Applewood-Softworks</p>
        </footer>
        
        <script>
            const loginButton = document.getElementById("loginButton");
            document.addEventListener("keypress", async function(event) {
                if (event.keyCode == 13){
                    let username = document.getElementById("Username").value;
                    let password = document.getElementById("Password").value;
                    var login = await fetch("/api/login?username=" + username + "&password=" + password).then(res => res.json()).catch(err => console.log(err) );
                    if(login){
                        window.location.href = "/itempage";
                    }
                    else{
                        alert("Invalid username or password");
                    }
                }
            });
            loginButton.addEventListener("click", async function(){
                let username = document.getElementById("Username").value;
                let password = document.getElementById("Password").value;
                var login = await fetch("/api/login?username=" + username + "&password=" + password).then(res => res.json()).catch(err => console.log(err) );
                if(login){
                    window.location.href = "/itempage";
                }
                else{
                    alert("Invalid username or password");
                }
            });

        </script>
    </body>
    
</html>
